# ESP32-C3 BLE
**–ì–∏–±–∫–∏–π BLE-–º–æ–¥—É–ª—å –¥–ª—è ESP32 (ESP-IDF), –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π BLE 5.0 (Extended Advertising) –∏ –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å BLE 4.2 (Legacy).**

![–õ–∏—Ü–µ–Ω–∑–∏—è](https://img.shields.io/badge/license-Unlicense-blue.svg)
![PlatformIO](https://img.shields.io/badge/platform-ESP32--C3-green.svg)
![BLE 5.0](https://img.shields.io/badge/BLE-5.0%2F4.2-brightgreen.svg)  
![Version](https://img.shields.io/badge/version-1.1.0-orange)

---

## **üìå –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**
‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ BLE 5.0 + BLE 4.2**
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ä–µ–∫–ª–∞–º–∞ (Extended Advertising) –¥–ª—è Android/iOS.
- Legacy-—Ä–µ–∫–ª–∞–º–∞ –¥–ª—è Web Bluetooth (Chrome).

‚úÖ **–ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ BLE**
- –ü—Ä–µ—Å–µ—Ç—ã (`BleConfig::Preset`): `BLE5_ULTRA_PERF`, `BLE4_LOW_POWER` –∏ –¥—Ä.
- –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ PHY, –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ —Ä–µ–∫–ª–∞–º—ã, –º–æ—â–Ω–æ—Å—Ç–∏ TX.

‚úÖ **–†–∞–±–æ—Ç–∞ —Å UUID –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–≤–µ—Ä—Å–∏—è –±–∞–π—Ç –¥–ª—è Web Bluetooth.

‚úÖ **–ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π API**
- –í—Å–µ –º–µ—Ç–æ–¥—ã –∑–∞—â–∏—â–µ–Ω—ã `std::recursive_mutex`.

---

## **‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞**
### **1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–±–æ—Ä–∫–∞**
```bash
git clone https://github.com/your-repo/esp32-ble-gateway.git
cd esp32-ble-gateway
idf.py set-target esp32c3  # –∏–ª–∏ esp32, esp32s3
idf.py menuconfig          # –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (UART, BLE —Ä–µ–∂–∏–º)
idf.py build flash monitor # —Å–±–æ—Ä–∫–∞ –∏ –ø—Ä–æ—à–∏–≤–∫–∞
```

### **2. –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç**
```cpp
#include "net/ble.h"

net::BLE ble(net::BleConfig::Preset::BLE5_DEFAULT);

void app_main() {
    ble.quickStart(
        "MyBLEDevice",
        std::make_unique<MyDataCallback>() // –í–∞—à callback –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö
    );
}
```

---

## **üìä –ü—Ä–µ—Å–µ—Ç—ã BLE**
| –ü—Ä–µ—Å–µ—Ç                  | –û–ø–∏—Å–∞–Ω–∏–µ                                  |
|-------------------------|------------------------------------------|
| `BLE5_ULTRA_PERF`       | –ú–∞–∫—Å. –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (PHY 2M, 9dBm)  |
| `BLE5_LOW_POWER`        | –≠–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏–µ (–∏–Ω—Ç–µ—Ä–≤–∞–ª—ã 320-640ms)   |
| `BLE4_DEFAULT`          | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ESP-IDF            |

---

## **üîß –ü—Ä–∏–º–µ—Ä—ã**
### **1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ BLE 5.0**
```cpp
net::BleConfig config(net::BleConfig::Preset::BLE5_ULTRA_PERF);
config.extAdvParams.tx_power = ESP_PWR_LVL_P9;
ble.updateConfig(config);
```

### **2. –†–∞–±–æ—Ç–∞ —Å UUID**
```cpp
// –î–ª—è Chrome (–∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π UUID)
auto uuid = ble.uuidFromString("6E400001-B5A3...", true);

// –î–ª—è Android (–ø—Ä—è–º–æ–π –ø–æ—Ä—è–¥–æ–∫)
auto uuid = ble.uuidFromString("6E400001-B5A3...", false);
```

---

## **üì° –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∫–ª–∏–µ–Ω—Ç—ã**
| –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ       | –†–µ–∂–∏–º          | UUID          |  
|------------------|---------------|---------------|  
| **Chrome**       | BLE 4.2       | –ò–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π |  
| **Android/iOS**  | BLE 5.0       | –ü—Ä—è–º–æ–π        |  

---

## **üìú –õ–∏—Ü–µ–Ω–∑–∏—è**
–î–∞–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ —Å–≤–æ–±–æ–¥–Ω–æ–µ –∏ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ, –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–µ –≤ –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –¥–æ—Å—Ç–æ—è–Ω–∏–µ.
–í—ã –º–æ–∂–µ—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å, –∏–∑–º–µ–Ω—è—Ç—å, –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å, –ø—Ä–æ–¥–∞–≤–∞—Ç—å –∏–ª–∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—Ç—å —ç—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –≤ –∏—Å—Ö–æ–¥–Ω–æ–º –∫–æ–¥–µ –∏–ª–∏ –≤ –≤–∏–¥–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –±–∏–Ω–∞—Ä–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –¥–ª—è –ª—é–±—ã—Ö —Ü–µ–ª–µ–π, –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –∏–ª–∏ –Ω–µ–∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö, –∏ –ª—é–±—ã–º–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏.

---
